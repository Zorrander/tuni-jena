@prefix ns:   <http://www.example.org/ns#> .
@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:  <http://www.w3.org/2002/07/owl#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .
@prefix cogrob: <http://onto-server-tuni.herokuapp.com/Panda#> .

@include <OWL> .

// React to handover commands
[handoverCmd: (?cmd cogrob:has_action 'give') (?cmd cogrob:has_target ?thing)
                -> (cogrob:handoverInd rdf:type cogrob:Handover) (cogrob:handoverInd cogrob:actsOn ?thing)]

// Create an event to give an object after handoverCmd and acquiring the object
[handoverRule: (?event rdf:type cogrob:Handover) (?event cogrob:actsOn ?thing) (?event cogrob:involves cogrob:Robot)
                    (cogrob:Robot cogrob:isHolding ?thing) noValue(?grasp cogrob:isDone "true")
              -> (cogrob:moveArmInd2 rdf:type cogrob:ArmEvent) (cogrob:moveArmInd2 cogrob:actsOn ?thing)
                (cogrob:moveArmInd2 cogrob:withPath cogrob:moveArmPath) (cogrob:moveArmPath rdf:type cogrob:Toward)
                (cogrob:moveArmPath cogrob:withPlace cogrob:InFunction) (cogrob:InFunction rdf:type cogrob:Inside)
                (cogrob:Inside cogrob:withPlace ?hand (cogrob:Human hasHand ?hand)]

// Create an event to reach for the object if trying to grasp an object too far from the gripper
[moveArm: (?event rdf:type cogrob:ManipulationTask) (?event cogrob:actsOn ?thing) (?event cogrob:involves ?actor) noValue(?actor cogrob:isHolding ?thing)
                      noValue(?thing cogrob:isInReachOf ?actor) noValue(?grasp cogrob:isDone "true") (?actor cogrob:isHoldingSomething "false")
              -> (cogrob:moveArmInd1 rdf:type cogrob:ArmEvent) (cogrob:moveArmInd1 cogrob:actsOn ?thing)]

// Create an event to properly grasp the object
[moveGripper: (?grasp rdf:type cogrob:ManipulationTask) (?grasp cogrob:actsOn ?thing) noValue(?actor cogrob:isHolding ?thing)
                      (?grasp cogrob:involves ?actor) (?thing cogrob:isInReachOf ?actor) (?actor cogrob:isHoldingSomething "false")
              -> (cogrob:moveGripperInd rdf:type cogrob:GripperEvent) (cogrob:moveGripperInd cogrob:actsOn ?thing)]
