@prefix ns:   <http://www.example.org/ns#> .
@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:  <http://www.w3.org/2002/07/owl#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .
@prefix cogrob: <http://onto-server-tuni.herokuapp.com/Panda#> .

@include <OWL> .

// React to handover commands
[handoverCmd: (?cmd a cogrob:Command), (?cmd cogrob:has_action 'give'),
                                                   (?cmd cogrob:has_action 'give')
              -> (cogrob:handoverInd a cogrob:Handover),
                  (cogrob:handoverInd cogrob:actsOn ?thing)]

// Create an event to grasp an object in the case where the actor is not holding anything
[pickRule: (?grasp a cogrob:ManipulationTask), (?grasp cogrob:actsOn ?thing), (?grasp cogrob:involves ?actor),
                    noValue(?actor cogrob:isHolding ?thing), noValue(?grasp cogrob:isDone "true")
              -> (cogrob:pickObject a cogrob:Pick), (cogrob:pickObject cogrob:actsOn ?thing)]

// Create an event to give an object after handoverCmd and acquiring the object
[giveRule: (?grasp a cogrob:ManipulationTask), (?grasp cogrob:actsOn ?thing), (?grasp cogrob:involves ?actor),
                    (?actor cogrob:isHolding ?thing), noValue(?grasp cogrob:isDone "true")
              -> (cogrob:giveObject a cogrob:Handover), (cogrob:giveObject cogrob:actsOn ?thing)]

// Create an event to reach for the object if trying to grasp an object too far from the gripper
[moveArm: (?grasp a cogrob:Pick), (?grasp cogrob:actsOn ?thing), (?grasp cogrob:involves ?actor),
                      noValue(?thing cogrob:isInReachOf ?actor), noValue(?grasp cogrob:isDone "true"), (?actor cogrob:isHoldingSomething "false")
              -> (cogrob:moveArmInd a cogrob:ArmEvent), (cogrob:moveArmInd cogrob:actsOn ?thing)]

// Create an event to properly grasp the object
[moveGripper: (?grasp a cogrob:Pick), (?grasp cogrob:actsOn ?thing),
                      (?grasp cogrob:involves ?actor), (?thing cogrob:isInReachOf ?actor), (?actor cogrob:isHoldingSomething "false")
              -> (cogrob:moveGripperInd a cogrob:GripperEvent), (cogrob:moveGripperInd cogrob:actsOn ?thing)]
